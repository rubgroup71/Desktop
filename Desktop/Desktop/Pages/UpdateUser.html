<!DOCTYPE html>
<html lang="en">
<head>
    <title></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="../Scripts/ajaxCalls.js"></script>
    <script>

        $(document).ready(function () {
            User();
            $("#Sform").submit(f1);
            
        });

        function AddSalesPerson() {



            SalesPerson = { // Note that the name of the fields must be identical to the names of the properties of the object in the server
                UserName: $("#UserName").val(),
                Password: $("#Password").val(),
                FirstName: $("#FirstName").val(),
                LastName: $("#LastName").val(),
                PhoneNumber:$("#Phone").val(),
                Area: $("#Area").val(),
                Email: $("#Email").val()

            };

            ajaxCall("PUT", "../api/SalesPerson", JSON.stringify(SalesPerson), success, error);

        }


        function success(data) {
            swal("Added Successfuly!", "User created", "success")
        }

        function error(err) {
            alert("error");
        }

        function f1() {
            AddSalesPerson();
            return false; // the return false will prevent the form from being submitted
            // hence the page will not reload
        }

        function User() {
            user = JSON.parse(localStorage.getItem('data'));
            $("#UserName").val(user.UserName),
                $("#Password").val(user.Password),
                $("#FirstName").val(user.FirstName),
                $("#LastName").val(user.LastName),
                $("#Phone").val(user.PhoneNumber),
                $("#Area").val(user.Area),
                $("#Email").val(user.Email)


        }
    </script>
    
    <link href="../style/UpdateUser.css" rel="stylesheet" />

</head>
<body>
    <ul id="head">
        <li><a href="OrderList.html">Order List</a></li>
        <li><a href="CustomerList.html">Customers List</a></li>
        <li><a href='Create New Customer.html'>Create New Customer </a></li>
        <li><a class="active" href="UserList.html">User List</a></li>
        <li><a href="InsertItem.html">Insert Item</a></li>
    </ul>
    <div class="container">
        <div class="title">
            <h2>Update User</h2>
        </div>
        <div class="d-flex">
            <form name="RegForm" id="Sform">
                <label>
                    <span class="lname">First Name<span class="required">*</span></span>
                    <input type="text" name="firstname" id="FirstName" required>
                </label>
                <label>
                    <span class="lname">Last Name<span class="required">*</span></span>
                    <input type="text" name="lastname" id="LastName" required>
                </label>
                <label>
                    <span>Email<span class="required">*</span></span>
                    <input type="email" name="email" id="Email" required>
                </label>
                <label>
                    <span>Phone Number<span class="required">*</span></span>
                    <input type="tel" pattern="^05\d{8}$" name="phone" id="Phone" required>
                </label>
                <label>
                    <span>Area<span class="required">*</span></span>
                    <input type="text" name="area" id="Area" required>
                </label>
                <label>
                    <span>User Name<span class="required">*</span></span>
                    <input type="text" name="username" id="UserName" required>
                </label>
                <label>
                    <span>Password<span class="required">*</span></span>
                    <input type="text" name="password" id="Password" required>
                </label>
                <input type="submit" value="Update" />
            </form>

        </div>
    </div>
</body>
</html>